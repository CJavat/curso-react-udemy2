"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.useGlobalPendingState = void 0;
const react_1 = require("@remix-run/react");
const react_2 = require("react");
/**
 * Let you know if the app is pending some request, either global transition
 * or some fetcher transition.
 * @returns "idle" | "pending"
 */
function useGlobalPendingState() {
    let transition = (0, react_1.useTransition)();
    let fetchers = (0, react_1.useFetchers)();
    /**
     * This gets the state of every fetcher active on the app and combine it with
     * the state of the global transition (Link and Form), then use them to
     * determine if the app is idle or if it's loading.
     * Here we consider both loading and submitting as loading.
     */
    return (0, react_2.useMemo)(function getGlobalState() {
        let states = [
            transition.state,
            ...fetchers.map((fetcher) => fetcher.state),
        ];
        if (states.every((state) => state === "idle"))
            return "idle";
        return "pending";
    }, [transition.state, fetchers]);
}
exports.useGlobalPendingState = useGlobalPendingState;
